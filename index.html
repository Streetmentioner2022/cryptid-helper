<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>National Anomaly Field Office</title>

  <style>
    :root{
      --panel: rgba(18, 20, 24, 0.78);
      --panel2: rgba(14, 16, 20, 0.62);
      --border: rgba(255,255,255,0.12);
      --border2: rgba(255,255,255,0.08);
      --text: rgba(245,246,250,0.92);
      --muted: rgba(245,246,250,0.62);
      --muted2: rgba(245,246,250,0.42);
      --radius: 18px;
      --radius2: 14px;
      --shadow: 0 20px 60px rgba(0,0,0,0.55);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin: 0;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(70,120,160,0.18), transparent 60%),
        radial-gradient(900px 650px at 85% 20%, rgba(120,90,160,0.14), transparent 55%),
        radial-gradient(1100px 800px at 50% 90%, rgba(80,120,100,0.12), transparent 55%),
        linear-gradient(180deg, #050608 0%, #07080a 40%, #050608 100%);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      letter-spacing: 0.2px;
    }

    /* scanlines */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events:none;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.06) 0px,
        rgba(255,255,255,0.06) 1px,
        rgba(0,0,0,0.00) 3px,
        rgba(0,0,0,0.00) 7px
      );
      opacity: 0.22;
      mix-blend-mode: overlay;
      z-index: 5;
    }

    /* grain */
    body::after{
      content:"";
      position: fixed;
      inset: -40px;
      pointer-events:none;
      background-image: radial-gradient(rgba(255,255,255,0.08) 1px, transparent 1px);
      background-size: 3px 3px;
      opacity: 0.06;
      filter: blur(0.2px);
      mix-blend-mode: overlay;
      transform: rotate(0.3deg);
      z-index: 4;
    }

    .topstrip{
      width: 100%;
      background: linear-gradient(90deg, #3a0000, #6a0000, #3a0000);
      color: #ffb3b3;
      text-align: center;
      font-size: 12px;
      letter-spacing: 2px;
      padding: 8px 0;
      font-weight: 800;
      text-transform: uppercase;
      box-shadow: 0 2px 12px rgba(0,0,0,0.6);
      position: sticky;
      top: 0;
      z-index: 30;
    }

    /* CRT overlay (whole screen tint) */
    .crt{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 3;
      background:
        linear-gradient(rgba(0,255,140,0.18), rgba(0,255,140,0.18)),
        radial-gradient(circle at 50% 50%, rgba(0,0,0,0) 55%, rgba(0,0,0,0.65) 100%);
      mix-blend-mode: multiply;
      opacity: 0.80;
    }

    .watermark{
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-25deg);
      font-size: 140px;
      font-weight: 900;
      letter-spacing: 12px;
      color: rgba(0,255,150,0.22);
      pointer-events: none;
      z-index: 1;
      white-space: nowrap;
    }

    .wrap{
      max-width: 1120px;
      margin: 0 auto;
      padding: 22px 18px 70px;
      position: relative;
      z-index: 10;
    }

    header{
      display:flex;
      align-items:flex-start;
      justify-content: space-between;
      gap: 18px;
      margin-bottom: 18px;
    }

    .titleblock{
      flex: 1;
      padding: 16px 18px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.18);
      background: linear-gradient(180deg, rgba(24,28,34,0.96), rgba(12,14,18,0.88));
      box-shadow: 0 18px 60px rgba(0,0,0,0.55);
    }

    h1{
      margin: 0 0 6px;
      font-size: 22px;
      font-weight: 800;
      letter-spacing: 1.2px;
      text-transform: uppercase;
    }

    .sub{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.45;
      white-space: pre-line;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(10,12,16,0.55);
      color: var(--muted);
      font-size: 12px;
      white-space: nowrap;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      height: fit-content;
    }

    .dot{
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(165,220,255,0.95);
      box-shadow: 0 0 0 3px rgba(165,220,255,0.15);
    }

    .card{
      border: 1px solid rgba(255,255,255,0.16);
      border-radius: calc(var(--radius) + 2px);
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      box-shadow: 0 24px 80px rgba(0,0,0,0.65);
      padding: 16px;
      backdrop-filter: blur(10px);
    }

    .row3{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 14px;
      margin-bottom: 14px;
    }
    @media (max-width: 900px){ .row3{ grid-template-columns: 1fr; } }

    label{
      display:block;
      font-size: 11px;
      color: var(--muted2);
      margin: 0 0 7px;
      letter-spacing: 0.7px;
      text-transform: uppercase;
    }

    select, input, textarea{
      width: 100%;
      padding: 12px 12px;
      border-radius: var(--radius2);
      border: 1px solid var(--border);
      background: rgba(10,12,16,0.55);
      color: var(--text);
      outline: none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
    }
    select:focus, input:focus, textarea:focus{
      border-color: rgba(165,220,255,0.55);
      box-shadow: 0 0 0 4px rgba(165,220,255,0.12);
    }

    textarea{
      height: 220px;
      resize: vertical;
      line-height: 1.35;
    }

    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 12.5px;
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button{
      width:auto;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: linear-gradient(180deg, rgba(24,28,34,0.85), rgba(10,12,16,0.75));
      color: var(--text);
      cursor:pointer;
      transition: transform 120ms ease, border-color 120ms ease, filter 120ms ease;
    }
    button:hover{
      transform: translateY(-1px);
      border-color: rgba(165,220,255,0.55);
      filter: brightness(1.12);
    }
    button:active{ transform: translateY(0px); }

    .small{
      font-size: 12px;
      color: var(--muted);
      margin-top: 8px;
      line-height: 1.4;
    }

    .classbar{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(10,12,16,0.55);
      margin: 10px 0 8px;
      font-size: 11px;
      letter-spacing: 1.1px;
      text-transform: uppercase;
      color: rgba(245,246,250,0.75);
    }
  </style>
</head>

<body>
  <div class="topstrip">⚠ CLASSIFIED • NATIONAL ANOMALY FIELD OFFICE • EYES ONLY • LEVEL 4 CLEARANCE REQUIRED</div>
  <div class="crt"></div>
  <div class="watermark">NAFO ARCHIVE</div>

  <div class="wrap">
    <header>
      <div class="titleblock">
        <h1>National Anomaly Field Office</h1>
        <p class="sub">Internal Field Documentation Interface
Status: Officially Unacknowledged</p>
      </div>
      <div class="badge"><span class="dot"></span> SIGNAL: STABLE • ARCHIVE: OPEN</div>
    </header>

    <div class="card">
      <!-- NEW CLEAN HIERARCHY: Classification → Creature → Location -->
      <div class="row3">
        <div>
          <label>Classification</label>
          <select id="classification"></select>
        </div>

        <div>
          <label>Creature / Entity</label>
          <select id="creature"></select>
          <div class="small" id="creatureHint"></div>
        </div>

        <div>
          <label>Location / Setting</label>
          <select id="location">
            <option>mist-covered Blue Ridge forest clearing</option>
            <option>dark Atlantic tide pools on a rocky shoreline</option>
            <option>fog-choked lighthouse approach road</option>
            <option>abandoned industrial waterfront</option>
            <option>empty motel corridor under fluorescents</option>
            <option>closed shopping mall atrium, rain on skylight</option>
            <option>moonlit bog with peat pools</option>
            <option>quiet mountain rest stop at night</option>
          </select>
        </div>
      </div>

      <!-- Atmosphere comes before camera stuff -->
      <div class="row3">
        <div>
          <label>Atmosphere</label>
          <select id="atmosphere">
            <option>heavy fog</option>
            <option>steady rain</option>
            <option>thunderstorm in the distance</option>
            <option>coastal mist and salt spray</option>
            <option>overcast twilight</option>
            <option>moonlit night</option>
            <option>snow flurries</option>
            <option>fluorescent hum</option>
          </select>
        </div>

        <div>
          <label>Behavior</label>
          <select id="behavior">
            <option>standing motionless</option>
            <option>slowly emerging</option>
            <option>turning toward camera</option>
            <option>passing through frame</option>
          </select>
        </div>

        <div>
          <label>Camera / Composition</label>
          <select id="camera">
            <option>static documentary framing, centered subject</option>
            <option>handheld field footage, imperfect focus</option>
            <option>telephoto compression, distant observation</option>
            <option>wide shot, subject small against environment</option>
          </select>
        </div>
      </div>

      <div class="row3">
        <div>
          <label>Transmission Type</label>
          <select id="transmission">
            <option>classified field report segment</option>
            <option>containment briefing excerpt</option>
            <option>restricted archival broadcast</option>
            <option>intercepted maritime anomaly transmission</option>
          </select>
        </div>

        <div>
          <label>Year</label>
          <select id="year">
            <option>1971</option><option>1972</option><option>1973</option><option selected>1974</option>
            <option>1975</option><option>1976</option><option>1977</option><option>1978</option><option>1979</option>
          </select>
        </div>

        <div>
          <label>Aspect Ratio</label>
          <input id="ar" value="32:9" />
        </div>
      </div>

      <div class="row3">
        <div>
          <label>Chaos</label>
          <select id="chaos">
            <option>6</option><option selected>9</option><option>11</option><option>13</option>
          </select>
        </div>

        <div>
          <label>Extra Notes (optional)</label>
          <input id="notes" placeholder="e.g., timecode burn-in, station watermark, clear silhouette" />
        </div>

        <div>
          <label>Subject Lock</label>
          <select id="lock">
            <option value="normal" selected>Normal</option>
            <option value="strong">Strong</option>
            <option value="max">Max</option>
          </select>
        </div>
      </div>

      <div class="classbar">
        <span>FIELD REPORT GENERATOR</span>
        <span class="mono">ARCHIVE NODE 32</span>
      </div>

      <label>Generated Prompt</label>
      <textarea id="output" class="mono" readonly></textarea>

      <div class="actions">
        <button id="copy">Copy</button>
        <button id="randomize">Randomize</button>
      </div>

      <div class="small">Classification changes the Creature list automatically.</div>
    </div>
  </div>

  <script>
    // --------- ELI5 EXPLANATION ----------
    // We have a "map" that says:
    // If you pick Cryptid -> show cryptid creatures.
    // If you pick Fae -> show fae creatures.
    // Then we rebuild the prompt every time you change something.

    const el = (id) => document.getElementById(id);

    const CREATURES_BY_CLASS = {
      "Cryptid": [
        "Jersey Devil",
        "Mothman",
        "Bigfoot",
        "Chupacabra",
        "Flatwoods Monster",
        "Dogman",
        "Skunk Ape",
        "Thunderbird"
      ],
      "Fae": [
        "The Wild Hunt",
        "Leprechaun",
        "Banshee",
        "Redcap",
        "Selkie",
        "Púca",
        "Brownie",
        "Dullahan"
      ],
      "Maritime Entity": [
        "Kelpie",
        "Kraken",
        "Sea Serpent",
        "Lighthouse Wraith",
        "Abyssal Leviathan",
        "Sargassum Thing"
      ],
      "Interdimensional": [
        "Geometric Emissary",
        "Mirror Visitor",
        "Doorway Figure",
        "Angle-Walker"
      ],
      "Occult Construct": [
        "Sigil-Made Sentinel",
        "Wax Effigy",
        "Bone Golem",
        "Paper Familiar"
      ],
      "Biological Anomaly": [
        "Fungal Humanoid",
        "Spore Host",
        "Chitinous Biped",
        "Blind Burrower"
      ],
      "Environmental Mimic": [
        "Living Shadow",
        "Fog Imitator",
        "Tree-Line Watcher",
        "Static Shambler"
      ],
      "Unknown": [
        "Unidentified Bipedal Organism",
        "Unidentified Winged Entity",
        "Unclassified Presence",
        "Unknown Subject"
      ]
    };

    function fillSelect(selectEl, options, keepFirst = false) {
      const current = selectEl.value;
      selectEl.innerHTML = "";
      options.forEach((txt) => {
        const opt = document.createElement("option");
        opt.textContent = txt;
        selectEl.appendChild(opt);
      });

      // try to keep what you had selected if it still exists
      if (keepFirst) return;
      const stillExists = options.includes(current);
      if (stillExists) selectEl.value = current;
    }

    function onClassificationChange() {
      const cls = el("classification").value;
      const list = CREATURES_BY_CLASS[cls] || CREATURES_BY_CLASS["Unknown"];
      fillSelect(el("creature"), list);

      el("creatureHint").textContent = (cls === "Unknown")
        ? "Classification is Unknown: broad placeholder subjects."
        : `Loaded ${list.length} ${cls} subjects.`;

      build();
    }

    function build() {
      const cls = el("classification").value;
      const creature = el("creature").value;
      const location = el("location").value;
      const atmosphere = el("atmosphere").value;
      const behavior = el("behavior").value;
      const camera = el("camera").value;
      const transmission = el("transmission").value;
      const year = el("year").value;
      const ar = (el("ar").value.trim() || "32:9");
      const chaos = el("chaos").value;
      const notes = el("notes").value.trim();
      const lock = el("lock").value;

      let subjectLead = `${cls}: ${creature}`;
      let lockTail = "";

      if (lock === "strong") {
        subjectLead = `${subjectLead}, ${subjectLead}`;
      } else if (lock === "max") {
        subjectLead = `${subjectLead}, ${subjectLead}`;
        lockTail = ", camera locked on subject, clear silhouette, subject centered";
      }

      const prompt =
`${subjectLead}, ${behavior}, standing in ${location}, atmosphere: ${atmosphere}, ${camera}, ${transmission} (${year}), shot on degraded 16mm film transferred to unstable analog VHS, desaturated palette, soft bloom, film grain, faint scan lines, minor tracking distortion, natural lighting only, biological realism, matte textures, solemn institutional broadcast tone, archival anomaly documentation${lockTail}${notes ? ", " + notes : ""} --ar ${ar} --v 7 --style raw --chaos ${chaos}`;

      el("output").value = prompt;
    }

    function pickRandom(id) {
      const s = el(id);
      s.selectedIndex = Math.floor(Math.random() * s.options.length);
    }

    // ---- init ----
    const classList = Object.keys(CREATURES_BY_CLASS);
    fillSelect(el("classification"), classList);
    onClassificationChange(); // fills creature list + builds prompt

    // rebuild prompt when anything changes
    ["creature","location","atmosphere","behavior","camera","transmission","year","ar","chaos","notes","lock"]
      .forEach(id => {
        el(id).addEventListener("input", build);
        el(id).addEventListener("change", build);
      });

    // classification is special: it rebuilds creature options
    el("classification").addEventListener("change", onClassificationChange);

    el("copy").addEventListener("click", async () => {
      await navigator.clipboard.writeText(el("output").value);
      el("copy").textContent = "Copied!";
      setTimeout(() => el("copy").textContent = "Copy", 900);
    });

    el("randomize").addEventListener("click", () => {
      pickRandom("classification");
      onClassificationChange(); // refresh creature list for that class
      pickRandom("creature");
      ["location","atmosphere","behavior","camera","transmission","year","chaos"].forEach(pickRandom);
      build();
    });
  </script>
</body>
</html>
